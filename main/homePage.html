<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title data-i18n-title="home.pageTitle">Ingatkan Teman - Home</title>
    <link rel="stylesheet" href="../styles/global.css" />
    <link rel="stylesheet" href="homePageStyle.css" />
  </head>
  <body>
    <!-- ========== NAV BAR HEADER ========== -->
    <nav class="app-navbar">
      <img
        src="../assets/Ingatkan_Teman_Logo.PNG"
        alt="Logo"
        class="navbar-logo"
      />
      <span class="navbar-title">Ingatkan Teman</span>
      <div class="navbar-actions">
        <button
          class="lang-btn"
          id="langBtn"
          aria-label="Switch to Bahasa Melayu"
        >
          BM
        </button>
        <button class="logout-btn" id="logoutBtn" aria-label="Logout">
          üö™
        </button>
      </div>
    </nav>

    <!-- Welcome Header -->
    <header class="dashboard-header">
      <h1 data-i18n="home.welcome">Selamat Datang, Nenek ‚ù§Ô∏è</h1>
    </header>

    <!-- Feature Grid -->
    <div class="feature-grid">
      <!-- Row 1 Col 1: Medication Reminder -->
      <a
        href="../medReminder/medReminderHome.html"
        class="feature-card"
        data-theme="meds"
      >
        <div class="card-content">
          <img src="../assets/Adik_Ahmad.png" alt="Adik Ahmad" class="avatar" />
          <span class="card-title" data-i18n="home.medicationReminder"
            >Medication<br />Reminder</span
          >
        </div>
        <div class="card-platform"></div>
      </a>

      <!-- Row 1 Col 2: Medication Inventory -->
      <a
        href="../medInventoryTracker/inventoryHome.html"
        class="feature-card"
        data-theme="inventory"
      >
        <div class="card-content">
          <img
            src="../assets/PakCik_Firdaus.png"
            alt="PakCik Firdaus"
            class="avatar"
          />
          <span class="card-title" data-i18n="home.medicationInventory"
            >Medication<br />Inventory</span
          >
        </div>
        <div class="card-platform"></div>
      </a>

      <!-- Row 2: Health Recorder (Full Width with Dual Avatars) -->
      <a
        href="../dailyHealthRecorder/healthChat.html"
        class="feature-card full-width"
        data-theme="health"
      >
        <div class="card-content dual-avatar">
          <img
            src="../assets/Dr_Fatimah.png"
            alt="Dr. Fatimah"
            class="avatar"
          />
          <span class="card-title" data-i18n="home.dailyHealthRecorder"
            >Daily<br />Health<br />Recorder</span
          >
          <img src="../assets/Nurse_Alia.png" alt="Nurse Alia" class="avatar" />
        </div>
        <div class="card-platform"></div>
      </a>

      <!-- Row 3 Col 1: Chit-Chat -->
      <a
        href="../conversationalUI/chitChat.html"
        class="feature-card"
        data-theme="chat"
      >
        <div class="card-content">
          <img src="../assets/Adik_Aisya.png" alt="Adik Aisya" class="avatar" />
          <span class="card-title" data-i18n="home.chitChat">Chit-Chat</span>
        </div>
        <div class="card-platform"></div>
      </a>

      <!-- Row 3 Col 2: Consulting -->
      <a
        href="../conversationalUI/consultChat.html"
        class="feature-card"
        data-theme="consult"
      >
        <div class="card-content">
          <img
            src="../assets/Encik_Amirul.png"
            alt="Encik Amirul"
            class="avatar"
          />
          <span class="card-title" data-i18n="home.consulting">Consulting</span>
        </div>
        <div class="card-platform"></div>
      </a>
    </div>

    <!-- Footer -->
    <footer class="dashboard-footer">
      <p data-i18n="home.footer">May God be with you ‚ù§Ô∏è</p>
    </footer>

    <!-- i18n Script -->
    <script src="../i18n/i18n.js"></script>

    <script>
      // ========== SESSION CHECK ==========
      (function checkSession() {
        const isLoggedIn = sessionStorage.getItem("isLoggedIn");
        if (!isLoggedIn || isLoggedIn !== "true") {
          window.location.href = "../index.html";
        }
      })();

      // ========== LANGUAGE TOGGLE ==========
      const langBtn = document.getElementById("langBtn");

      // Force language to English on first load unless user changes it
      (function enforceEnglishDefault() {
        const langKey = "ingatkanTeman_language";
        const storedLang = localStorage.getItem(langKey);
        if (storedLang !== "en") {
          I18n.setLanguage("en");
        }
      })();

      // Initialize button text based on current language
      I18n.init(function (currentLang) {
        I18n.updateLangButton(langBtn);
      });

      langBtn.addEventListener("click", async function () {
        await I18n.switchLanguage();
        I18n.updateLangButton(langBtn);
      });

      // ========== LOGOUT ==========
      document
        .getElementById("logoutBtn")
        .addEventListener("click", function () {
          sessionStorage.removeItem("isLoggedIn");
          sessionStorage.removeItem("loginTime");
          window.location.href = "../index.html";
        });
    </script>
  </body>
</html>
